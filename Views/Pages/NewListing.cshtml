@{
    ViewData["Title"] = "Create New Listing";
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewData["Title"]</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/5.1.3/css/bootstrap.min.css" rel="stylesheet">
    <script type="module">
                import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.1.3/firebase-app.js';
                import { getAuth, createNewListing } from 'https://www.gstatic.com/firebasejs/9.1.3/firebase-auth.js';
                import { getDatabase, ref, set } from 'https://www.gstatic.com/firebasejs/9.1.3/firebase-database.js';

                  const firebaseConfig = {
          apiKey: "AIzaSyB5hjms7ZPmTL4jEuG1P6BIOi6zfSpslgQ",
          authDomain: "bartmartdb-4d9a9.firebaseapp.com",
          databaseURL: "https://bartmartdb-4d9a9-default-rtdb.firebaseio.com",
          projectId: "bartmartdb-4d9a9",
          storageBucket: "bartmartdb-4d9a9.appspot.com",
          messagingSenderId: "242866251858",
          appId: "1:242866251858:web:00f525da3828eae2fd578b",
          measurementId: "G-90SSEGT956"
        };
                    const app = initializeApp(firebaseConfig);
                    const auth = getAuth(app);
                    const database = getDatabase(app);


            document.getElementById("newListingForm").addEventListener("submit", function (event) {
                event.preventDefault();

                const title = document.getElementById("newListingTitle").value;
                const description = document.getElementById("newListingDescription").value;
                const price = document.getElementById("newListingPrice").value;
                const location = document.getElementById("newListingLocation").value;
                const category = document.getElementById("newListingCategory").value;
                const condition = document.getElementById("newListingCondition").value;
                const isexchangable = document.getElementById("newListingIsExchangable").checked;
                const cryptovalue = document.getElementById("newListingCryptoValue").value;
                const status = document.getElementById("newListingStatus").value;
                const image = document.getElementById("newListingImage").value;

                const listingData = {
                    title: title,
                    description: description,
                    price: price,
                    location: location,
                    category: category,
                    condition: condition,
                    isexchangable: isexchangable,
                    cryptovalue: cryptovalue,
                    status: status,
                    image: image
                };

                // Generate a new listing ID and save the listing
                const newListingRef = ref(database, 'listings').push();
                set(newListingRef, listingData)
                    .then(() => {
                        alert("Listing created successfully!");
                        window.location.href = "/";
                    })
                    .catch((error) => {
                        console.error("Error saving listing data: ", error);
                        alert("Error: " + error.message);
                    });
            });
    </script>
</head>
<body>
    <div class="container mt-5">
        <div class="row justify-content-center">
            <div class="col-md-6">
                <h2 class="text-center">New Listing</h2>
                <form id="newListingForm">
                    <div class="mb-3">
                        <label for="newListingImage" class="form-label">Upload Image</label>
                        <input type="text" class="form-control" id="newListingImage" placeholder="Image" required>
                    </div>
                    <div class="mb-3">
                        <label for="newListingTitle" class="form-label">What are you selling?</label>
                        <input type="text" class="form-control" id="newListingTitle" placeholder="Title" required>
                    </div>
                    <div class="mb-3">
                        <label for="newListingDescription" class="form-label">Please Describe the listing</label>
                        <input type="text" class="form-control" id="newListingDescription" placeholder="Enter Description" required>
                    </div>
                    <div class="mb-3">
                        <label for="newListingPrice" class="form-label">Price</label>
                        <input type="number" class="form-control" id="newListingPrice" placeholder="Price in Dollar" required>
                    </div>        
                    <div class="mb-3">
                        <label for="newListingCryptoValue" class="form-label">Please enter the Crypto Value for the Listing</label>
                        <input type="number" class="form-control" id="newListingCryptoValue" placeholder="Crypto Value" required>
                    </div>
                    <div class="mb-3">
                        <label for="newListingCategory" class="form-label">Please chose a Category</label>
                        <input type="text" class="form-control" id="newListingCategory" placeholder="Should we have a list?" required>
                    </div>
                    <div class="mb-3">
                        <label for="newListingCondition" class="form-label">Condition</label>
                        <input type="text" class="form-control" id="newListingCondition" placeholder="Enter the listing Condition" required>
                    </div>
                    <div class="mb-3">
                        <label for="newListingIsExchangable" class="form-label">Do you accept exchanges?</label>
                        <input type="checkbox" class="form-check-input" id="newListingIsExchangable" placeholder="Should we have checkbox here?" required>
                    </div>                    
                    <div class="mb-3">
                        <label for="newListingStatus" class="form-label">Listing Status</label>
                        <input type="text" class="form-control" id="newListingStatus" placeholder="Should we have checkbox?" required>
                    </div>
                    <div class="mb-3">
                        <label for="newListingLocation" class="form-label">Where is the pickup location?</label>
                        <input type="text" class="form-control" id="newListingLocation" placeholder="Enter postal code" required>
                    </div>
                    <button type="submit" class="btn btn-primary">Sign Up</button>
                </form>
            </div>
        </div>
    </div>
</body>
</html>